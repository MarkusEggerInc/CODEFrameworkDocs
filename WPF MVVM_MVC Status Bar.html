<div class="wikidoc">
<h2>WPF Status Bars</h2>
<p>The WPF MVVM/MVC modules of CODE framework support a standardized status update feature (this is typically used to implement status bars, but the exact visuals can vary from theme to theme and are fully stylable and customizable).</p>
<p>The basic idea is relatively simple: The Controller class has a Status() method that can be called to update the status like so:</p>
<pre><div style="color:black"><pre>Controller.Status(<span style="color:#a31515">&quot;Ready.&quot;</span>);</pre></div></pre>
<p>This sets the status message to “Ready.” and communicates this setting to the current Shell (main window). Depending on the chosen theme, this may then look different. For instance, a Metro application with this status could look like this:</p>
<p><a href="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417859"><img title="image" border="0" alt="image" src="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417860" width="690" height="427" style="border-right-width:0px; padding-left:0px; padding-right:0px; display:inline; border-top-width:0px; border-bottom-width:0px; border-left-width:0px; padding-top:0px"></a></p>
<p><em>Note: By default, status notifications in Metro applications are only shown for 10-12 seconds before they fade to transparency. This behavior can of course be restyled.</em></p>
<p>A Battleship (Windows 95) themed application with the same status could look like this:</p>
<p><a href="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417861"><img title="image" border="0" alt="image" src="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417862" width="690" height="435" style="border-right-width:0px; padding-left:0px; padding-right:0px; display:inline; border-top-width:0px; border-bottom-width:0px; border-left-width:0px; padding-top:0px"></a></p>
<p>In addition to setting status messages, one can also pass an overall status indicator to indicate whether the status is just informative or a warning or an error indicator, and so forth. Here is an example:</p>
<pre><div style="color:black"><pre>Controller.Status(<span style="color:#a31515">&quot;Pretending to load data...&quot;</span>, ApplicationStatus.Processing);</pre></div></pre>
<p>Depending on the theme, this information may result in a different visual style. For instance, the Metro skin by default shows status messages in a different color based on the overall state. The following screenshot shows Ready, Processing, Warning, and
 Error statuses respectively:</p>
<p><a href="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417863"><img title="image" border="0" alt="image" src="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417864" width="570" height="314" style="border-right-width:0px; padding-left:0px; padding-right:0px; display:inline; border-top-width:0px; border-bottom-width:0px; border-left-width:0px; padding-top:0px"></a></p>
<p><em>Note: Ready and Processing states by default use the same colors.</em></p>
<p>Like everything else in CODE Framework, these visuals are completely stylable both by simply re-defining the colors and brushes used as well as by creating brand new styles for the status area of the Shell. The default definition for the colors and brushes
 looks like this (and can be re-defined for your own purposes):</p>
<pre><div style="color:black"><pre><span style="color:green">&lt;!-- Application status bar --&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusReadyBackgroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>White<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusReadyForegroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>Black<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusProcessingBackgroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>White<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusProcessingForegroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>Black<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusWarningBackgroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>DarkOrange<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusWarningForegroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>White<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusErrorBackgroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>DarkRed<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span>
<span style="color:blue">&lt;</span><span style="color:#a31515">Color</span> <span style="color:red">x:Key</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">CODE.Framework-Metro-StatusErrorForegroundColor</span><span style="color:black">&quot;</span><span style="color:blue">&gt;</span>White<span style="color:blue">&lt;/</span><span style="color:#a31515">Color</span><span style="color:blue">&gt;</span></pre></div></pre>
<p>As usual, there are brush equivalents for all those.</p>
<h3>Customized Status Bars</h3>
<p>Following a standard CODE Framework pattern, status updates under the hood use standardized views and view models. So when sending status updates as in the examples above, the Controller creates a standard StatusViewModel, sets Message and Status properties,
 uses a standardized view, and loads it into a registered view handler that can handle status updates (typically a standard Shell). All of this can be customized.</p>
<p>Consider the following example:</p>
<pre><div style="color:black"><pre>Controller.Status(model: <span style="color:blue">new</span> ExampleStatusViewModel <br>                         {Message = <span style="color:#a31515">&quot;Some example custom message&quot;</span>},<br>                  viewName: <span style="color:#a31515">&quot;ExampleStatus&quot;</span>, <br>                  controllerType: <span style="color:blue">typeof</span> (CustomerController));</pre></div></pre>
<p>This sets the status using a custom view model and a custom view. Here is the custom view model used here:</p>
<pre><div style="color:black"><pre><span style="color:blue">public</span> <span style="color:blue">class</span> ExampleStatusViewModel : StatusViewModel
{<br>    <span style="color:blue">public</span> ExampleStatusViewModel()<br>    {<br>        Panel2 = <span style="color:#a31515">&quot;User: CODE Framework User&quot;</span>;<br>        Panel3 = <span style="color:#a31515">&quot;Time: &quot;</span> &#43; DateTime.Now.ToShortTimeString();<br>    }<br> <br>    <span style="color:blue">private</span> <span style="color:blue">string</span> _panel2;<br>    <span style="color:blue">public</span> <span style="color:blue">string</span> Panel2<br>    {<br>        <span style="color:blue">get</span> { <span style="color:blue">return</span> _panel2; }<br>        <span style="color:blue">set<br></span>        {<br>            _panel2 = value;<br>            NotifyChanged(<span style="color:#a31515">&quot;Panel2&quot;</span>);<br>        }<br>    }<br> <br>    <span style="color:blue">private</span> <span style="color:blue">string</span> _panel3;<br>    <span style="color:blue">public</span> <span style="color:blue">string</span> Panel3<br>    {<br>        <span style="color:blue">get</span> { <span style="color:blue">return</span> _panel3; }<br>        <span style="color:blue">set<br></span>        {<br>            _panel3 = value;<br>            NotifyChanged(<span style="color:#a31515">&quot;Panel3&quot;</span>);<br>        }<br>    }
}</pre></div></pre>
<p>Here is the example view used by this model:</p>
<pre><div style="color:black"><pre><span style="color:blue">&lt;</span><span style="color:#a31515">Controls</span><span style="color:blue">:</span><span style="color:#a31515">GridEx</span> <span style="color:red">ColumnWidths</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">*,25,Auto,25,Auto</span><span style="color:black">&quot;<br></span>  <span style="color:red">xmlns</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">http://schemas.microsoft.com/winfx/2006/xaml/presentation</span><span style="color:black">&quot;<br></span>  <span style="color:red">xmlns:Controls</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">clr-namespace:CODE.Framework.Wpf.Controls;assembly=CODE.Framework.Wpf</span><span style="color:black">&quot;</span><span style="color:blue">&gt;<br> <br></span>  <span style="color:blue">&lt;</span><span style="color:#a31515">TextBlock</span> <span style="color:red">Text</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">{Binding Message}</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;<br></span>  <span style="color:blue">&lt;</span><span style="color:#a31515">TextBlock</span> <span style="color:red">Text</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">{Binding Panel2}</span><span style="color:black">&quot;</span> <span style="color:red">Grid.Column</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">2</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;<br></span>  <span style="color:blue">&lt;</span><span style="color:#a31515">TextBlock</span> <span style="color:red">Text</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">{Binding Panel3}</span><span style="color:black">&quot;</span> <span style="color:red">Grid.Column</span><span style="color:blue">=</span><span style="color:black">&quot;</span><span style="color:blue">4</span><span style="color:black">&quot;</span> <span style="color:blue">/&gt;</span>
 
<span style="color:blue">&lt;/</span><span style="color:#a31515">Controls</span><span style="color:blue">:</span><span style="color:#a31515">GridEx</span><span style="color:blue">&gt;</span></pre></div></pre>
<p>Note that this view has to be defined in one of the standard view locations. If that location is not the shared location (typically it isn’t), then the system needs to know which controller the view goes with in order to find the view, which is why the controller
 type has to be passed as a parameter in the example above. This information provides overall execution context, so view engines can find their way around.</p>
<p>The following screenshot shows the result of this example in both Battleship and Metro modes:</p>
<p><a href="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417865"><img title="image" border="0" alt="image" src="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417866" width="714" height="100" style="border-right-width:0px; padding-left:0px; padding-right:0px; display:inline; border-top-width:0px; border-bottom-width:0px; border-left-width:0px; padding-top:0px"></a></p>
<p>When using custom view models, the Message and Status parameters if the Controller.Status() method are ignored, but one can simply set the Message and Status properties on the view model instead. Created styles still react to these properties the same way.
 In other words: If the Status was set to Error, without any further modifications of the view, it would look like this (assuming the default Metro style):</p>
<p><a href="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417867"><img title="image" border="0" alt="image" src="http://download.codeplex.com/Download?ProjectName=codeframework&DownloadId=417868" width="714" height="37" style="border-right-width:0px; padding-left:0px; padding-right:0px; display:inline; border-top-width:0px; border-bottom-width:0px; border-left-width:0px; padding-top:0px"></a></p>
<p>Note that status views and view models are unrestricted as far as features go and behave and work just like any other view. They can have any amount of data and any layout. They can have interactive controls and actions. Limitations are only set by screen
 real-estate. One would not want to create status bars that take up large amounts of the screen.</p>
<p>It is also possible to add custom actions to controllers that return status results. In most cases however, that is not needed.</p>
</div><div class="ClearBoth"></div>